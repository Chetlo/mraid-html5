<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <!-- Use title if it's in the page YAML frontmatter -->
        <title>Ads :: Expandable mraid</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
        

        <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
    </head>
    <body>
      
      <h2>Two part mraid template</h2>
      <p>Aut sed provident voluptatem quasi quo adipisci recusandae sit. nihil dolorem eaque sunt necessitatibus corrupti quia similique itaque. molestiae similique porro quas reiciendis sed fugit illo sed. quia excepturi aliquid ab temporibus voluptas ea eos deserunt eaque incidunt dolor. sit ea fugit sunt sed cum distinctio aperiam est est nihil commodi enim et inventore. eaque velit sapiente rerum voluptas excepturi totam ipsum. perferendis voluptas autem eaque provident autem

Est praesentium ipsum beatae non qui delectus vel optio velit cum dolorum accusantium. qui aut dolores suscipit sapiente. corrupti facere deserunt magni deleniti in odit sapiente tempore doloribus nisi. nihil iusto debitis sed quis consequatur et quia facilis numquam doloribus. magni nihil consequatur facere minima ipsa magni veniam sequi est velit non veritatis. laborum sunt autem ipsa iure eveniet dolor itaque

Cum velit praesentium est impedit delectus omnis voluptatem quo est dicta unde eveniet mollitia. recusandae officiis exercitationem hic repudiandae tempora commodi autem. est iste atque nobis non quo dolorem repudiandae esse vel quibusdam porro vel aperiam

Dolor vel eius officiis voluptate voluptatibus non animi molestiae dolore exercitationem ut eaque aut. suscipit culpa assumenda qui modi nemo suscipit perferendis est neque nam nobis accusamus enim iste. repellendus aut doloremque voluptas beatae. hic adipisci autem eos veritatis ipsam similique rerum eveniet tempore et occaecati et doloremque quia. veritatis et et nihil est velit omnis cum eum quae. expedita sint qui accusamus et et magnam et fugit ea odit facere impedit. fugit vel atque voluptates ut perferendis adipisci

Eius facere perspiciatis est eaque aperiam consequatur debitis velit possimus aliquid. libero est pariatur deleniti velit rem aut. esse quia eum qui aperiam molestiae et nesciunt beatae sapiente atque dolorem quo esse. dolor ullam quo aut. voluptate eveniet voluptatem enim odit unde dolores quia

Aut blanditiis vitae aperiam aliquid sequi dolor eos reprehenderit assumenda ipsa. qui vitae quia cum nemo natus. magnam et natus dicta magnam aut modi id est deserunt et harum dolorem nam. qui id molestiae ut expedita vero placeat temporibus odit et iusto porro. est quasi eligendi qui saepe ut nihil voluptatem soluta incidunt qui aliquid eum in in

Est ea voluptas itaque quas aut totam ex laudantium corrupti eum. quia dolore autem earum id et suscipit quo cupiditate distinctio sunt. ut quas sit accusantium aut repellat eveniet omnis sit officia ut. aut odit ab qui magni sunt quod at quam id. eligendi dolorem quia quibusdam accusamus debitis qui

Nobis saepe nihil perspiciatis doloremque rem quod fugiat eaque rerum numquam cupiditate. id et architecto et nisi et eum eum minus. atque debitis enim aspernatur iusto dolorum in harum. totam placeat quaerat est quia aut tempore perspiciatis nihil suscipit ex aut dignissimos cupiditate. cumque saepe id quaerat debitis est excepturi est sint et. esse maiores recusandae ea quaerat. nemo totam similique perspiciatis sint ut sint veritatis eaque ut quaerat eveniet in consequatur

Sit voluptates est officia et ut soluta rerum magnam illum tenetur adipisci ut esse repellendus. totam quae voluptatem aut veritatis quis iusto a a et sed quidem voluptas. natus quasi quo cumque at fugit. molestias ipsum quasi molestias repellat vel fugit quibusdam quod. accusamus quaerat assumenda voluptatem commodi tempora. qui culpa laboriosam autem eaque velit hic sapiente necessitatibus. id et similique id

Praesentium accusantium dolores non suscipit sit exercitationem. vero eum qui sed vel quia non quaerat. exercitationem architecto quia dignissimos nihil aliquam facilis incidunt eligendi architecto necessitatibus totam nostrum praesentium neque. ut quia rerum illo consectetur velit accusantium autem voluptas quidem a consequatur aut. distinctio qui ducimus eligendi minus et et alias quos tenetur. ullam nostrum quidem optio nostrum aliquid enim</p>

      <div id='two_part_mraid_ad_container_id' style="position: static; width: 320px; height: 50px; overflow: hidden">
  <div id="two_part_mraid_ad_container_id_wrapper">
    <iframe width="100%" height="100%" src='two_part_mraid/index.html' allowtransparency='true' seamless scrolling='no' style='z-index:10000; background:none;position: static; overflow: hidden !important;border: none !important;background-color: none !important;'></iframe>
    <iframe width="100%" height="100%" allowtransparency='true' seamless scrolling='no' style='display:none; z-index:10000; background:none;position: fixed; overflow: hidden !important;border: none !important;background-color: none !important;'></iframe>
  </div>
</div>


      <script>function Controller(adNode) {
  this.adContainerNode = adNode;
  this.wrapperNode = adNode.childNodes[1];
  this.firstPartNode = this.wrapperNode.childNodes[1];
  this.secondPartNode = this.wrapperNode.childNodes[3];
  this.placementType = this.firstPartNode.style.position == 'fixed' ? 'interstital' : 'inline';
  this.initialWidth = this.adContainerNode.style.width
  this.initialHeight = this.adContainerNode.style.height
  this.closeIcon = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAADb0lEQVR42u1XS0tbQRROqhQaUhRMTOKyG9OKWzUg5EG1bsRu/AXddiNtfSxqTLt1HQvd9hdkI2nUVLSQRekuxHcUQRBSXYXePCZ2vuGe25N4FZIbaBc5MMxl7syZ757znce12TrSkY78e7Hr84NQKNRNi4eHh8/K5fK7SqWyIscyG7HT09MI7Zudne3C2XaDMhQWCoXn1Wr1mxCicnOPSGCZy1+XL8x0WBL9CyFd0iKfcZkEdJNOp2uLi4ulkZERLRAIGGNhYUHb2tqqYg9EnvlEVma67JYsk0gkHFLxDi7Y2Ngoj42NleWyuG9gD/bqoHZ2d3cfM1B2K27qIjBra2u/6cLBwUHhdruFw+GoG1jDO9oXj8c13ao/5ubmHpHOptEQgclNBGZ4eNi4rK+v75Zl+BrtxVno0DRt3RJ/QGByE79A8kRMTEyoZ6/XawDweDxqjkQiYmlpqQ5UKpVSlrq4uHjTMiBEE8jJOYOLIEdHRwaQ/v5+AwzGwcGB2hOLxYy1cDhcLRaL4FNhdXXV1TQYqfQpQhvRRJzBPDk5KY6Pj9WF+/v7t1yWy+XUO5mLxPT0tFrz+/1q3tzcLMFKMoe9bhoQkh4OI7ShDGR1uVzGxVKpuhhzI5iTkxPR09Oj1tyuv+fm5+c1PUd9aBoQMjAOI89AGSIIs8/nMwDAbRAAyWaz6jmfzxsABgYGBD+LPKUDWm4F0DIOQwlXysmLsbe3J0i4tTjZTQBF2woI7qNnsgxZygy0CaD3bQPEv5ysA8uA4BBEGL33eX11gOB+HdDHljmE2kRW4UmPwIDAjZzi0Qc+EadkyqBS8qppQJKcIRxGoeRhHwwGDWsATG9vb13Y8+ibmpoS7Gx1e3sbJaSYyWQ8LfVB0ko/5YDbbiVG5Bmn02m4kXOG8hRPjKOjo6VarQbrrFspHS9hpWQyWeJlIBqNipmZmbrQ5ikBliEwrHSo/un6+jpkqQ+SX/TlruLKo41z5q7iqvdGvC9qqf3olm773th+DA0NmbYfAMTbDwYmbdIWt2YlWc+cBAru45y6a4Az5CaAkW5+aLWVbWw7u8l9IDqiDymBt6/IM6h9KMggsL43btIOt62vVkRH9N3X4MsAk9jLX6+ursbb3uTz3yAO7Pz8PGjyC7Qigbw9Ozt70vAxdltHOtKR/0T+AL2SJvDTWPbCAAAAAElFTkSuQmCC" 
}

Controller.prototype = {
  expand : function(arguments) {
    if (! arguments["url"]) {
      this.firstPartNode.contentDocument.body.setAttribute("class", "expanded");
    } else {
      this.firstPartNode.style.display = 'none'
      this.secondPartNode.src = arguments["url"]
      this.secondPartNode.style.display = 'block'
    }

    if(!arguments["useCustomClose"]) {
      this._setClose() 
    }

    this._resizeWrapper({ width: arguments.width, height: arguments.height, position: "fixed" });
    this._maximizeAdContainer()
  },

  resize : function(arguments) {
    this.firstPartNode.contentDocument.body.setAttribute("class", "resized");
    this._resizeWrapper(arguments)
  },

  _resizeWrapper : function(arguments) {
    var position = arguments.position || (arguments.x && arguments.width ? "fixed" : "static")
    if(arguments.width && arguments.height) {
      this.wrapperNode.style.width = arguments.width + "px";
      this.wrapperNode.style.height = arguments.height + "px";
    } else {
      this.wrapperNode.style.width = "auto";
      this.wrapperNode.style.height = "auto";
    }
    this.wrapperNode.style.position = position;
    this.wrapperNode.style.overflow = position == "static" ? "visible" : "hidden";
    this.wrapperNode.style.top = (arguments.x || 0) + "px";
    this.wrapperNode.style.left = (arguments.y || 0) + "px";
  },

  _maximizeAdContainer : function() {
    this.adContainerNode.style.width = "auto"
    this.adContainerNode.style.height = "auto"
    this.adContainerNode.style.position = "fixed"
    this.adContainerNode.style.top = 0
    this.adContainerNode.style.left = 0
    this.adContainerNode.style.right = 0
    this.adContainerNode.style.bottom = 0 
    this.adContainerNode.style.background = "rgba(0, 0, 0, 0.6)"
  },

  _minimizeAdContainer : function() {
    this.adContainerNode.style.width = this.initialWidth
    this.adContainerNode.style.height = this.initialHeight
    this.adContainerNode.style.position = "static"
    this.adContainerNode.style.top = "initial"
    this.adContainerNode.style.left = "initial" 
    this.adContainerNode.style.right = "initial" 
    this.adContainerNode.style.bottom = "initial" 
    this.adContainerNode.style.background = "none"
  },

  close : function(fromState) {
    if ( fromState == "default" ) {
      this.adContainerNode.style.display = 'none';
    } else {
      this.firstPartNode.contentDocument.body.removeAttribute("class", "expanded");
      this.firstPartNode.contentDocument.body.removeAttribute("class", "resized");
      this.secondPartNode.style.display = 'none';
      this.firstPartNode.style.display = 'block';
      var closeNode = this.wrapperNode.getElementsByClassName("mraidClose")[0]
      if(closeNode) {
        closeNode.remove();
      }
      this._resizeWrapper({});
      this._minimizeAdContainer();
    }
  },

  getCurrentPosition : function() {
    return {
      x: this.wrapperNode.offsetLeft,
      y: this.wrapperNode.offsetTop,
      width: this.wrapperNode.offsetWidth,
      height: this.wrapperNode.offsetHeight
    }
  },

  getPlacementType : function() {
    return this.placementType;
  },

  _setClose : function() {
    var closeNode = document.createElement('img');

    closeNode.setAttribute('src', this.closeIcon);
    closeNode.setAttribute('class', 'mraidClose');
    closeNode.setAttribute('onclick', 'mraid.close();');
    closeNode.style.position = 'absolute';
    closeNode.style.width = '50px';
    closeNode.style.height = '50px';
    closeNode.style.top = '0px';
    closeNode.style.right = '0px';
    closeNode.style.zIndex = '99999999999';

    this.wrapperNode.appendChild(closeNode);
  },

  postMessage: function(event) {
    if (event.target == "controller") {
      return this[event.action].apply(controller, [event.arguments])
    }
  }
}

window.controller = new Controller(document.getElementById('two_part_mraid_ad_container_id'));
</script>

      <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
      <div id="debugger" style="position: fixed; right: 0; top: 0; background: #ddd">
        <iframe width="100%" height="100%" src='../debugger.html' allowtransparency='true' seamless scrolling='no' style='z-index:10000; background:none;position: static; overflow: hidden !important;border: none !important;background-color: none !important;'></iframe>
      </div>
    </body>
</html>
