<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <!-- Use title if it's in the page YAML frontmatter -->
        <title>Ads :: Resizable mraid</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
        

        <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
    </head>
    <body>
      
      <h2>Two part mraid template</h2>
      <p>Ut ab dolor soluta quod. voluptatem et eaque non et blanditiis consequatur quia. qui quibusdam quis praesentium eaque dolorum consequatur

Doloremque veritatis non aut nihil ipsum quo voluptatem nihil sit modi consequatur hic et. velit qui qui aut. et recusandae consequatur ipsa quisquam placeat sint dicta unde. qui mollitia ex aspernatur quae optio et. nobis itaque fugiat numquam modi ut. vel rem minus sunt praesentium soluta esse aut. voluptas autem molestiae aspernatur molestiae beatae nulla dolorem blanditiis sit

Rerum quo amet maxime esse et esse beatae ut ducimus qui exercitationem. sit repellat minima nihil vero cupiditate cum sit commodi asperiores dolore numquam ut voluptas illo. sit commodi sapiente minus vel magni assumenda aut id et molestias est qui facere

Omnis sit voluptates tempora quibusdam et saepe facilis fugiat et dolorum facere et excepturi. illo quae doloribus in possimus ut est esse quia. et dolorum unde omnis placeat nisi accusantium quia cupiditate velit mollitia. nesciunt qui qui quibusdam quibusdam consequuntur et consequatur voluptatem omnis aut animi aut. nesciunt tempore laudantium velit qui. eveniet suscipit consequatur qui aperiam molestiae. sit officiis autem blanditiis laborum minima ut consequatur molestias delectus

Cum vero architecto et. omnis pariatur sint veniam laboriosam et. aspernatur explicabo et nemo nostrum corrupti expedita iste quia ut velit. rerum est labore voluptatem esse illo qui alias nobis consequatur impedit ipsam debitis quis. et reprehenderit cupiditate velit neque reprehenderit tenetur suscipit et voluptatum nam. qui non fugit corporis

Autem nobis inventore ea ut et aut officiis omnis. laboriosam eveniet mollitia est et quo enim expedita modi et. in earum nihil omnis sed

Accusamus soluta error magnam minima nostrum. nulla quia odio possimus numquam quia ullam qui nesciunt facere non voluptas qui. illum tempore in itaque nam modi facilis est

Nisi beatae cumque et et perferendis non. dolor et eum nobis adipisci. omnis impedit et omnis ab quis non ut et facere hic architecto. eos ipsam animi facere minus tempora ut laboriosam error dicta reiciendis. necessitatibus autem quasi enim cumque ullam veritatis. rerum autem aut aliquam repellat veritatis eaque nostrum

Odio harum esse ut sint et qui et eveniet aut ut consequuntur unde. est qui laboriosam vitae molestiae minima et consequuntur voluptas dolorum. ex odit consequatur voluptates. eum odit beatae error. quam laboriosam adipisci tenetur dolorem. quibusdam modi in at

Quidem rerum nam facere nobis non quis voluptatum sint non. non quidem sapiente quo aut neque impedit. omnis itaque rem vel voluptatem quia dolorum et dolorem magnam voluptatem quia quo. voluptatem asperiores saepe et aspernatur nihil. est consectetur suscipit quas ut reprehenderit et</p>

      <div id='mraid_ad_container_id' style="position: static; width: 320px; height: 50px; overflow: hidden">
  <div id="mraid_ad_container_id_wrapper">
    <iframe width="100%" height="100%" src='resize_mraid/index.html' allowtransparency='true' seamless scrolling='no' style='z-index:10000; background:none;position: static; overflow: hidden !important;border: none !important;background-color: none !important;'></iframe>
    <iframe width="100%" height="100%" allowtransparency='true' seamless scrolling='no' style='display:none; z-index:10000; background:none;position: fixed; overflow: hidden !important;border: none !important;background-color: none !important;'></iframe>
  </div>
</div>


      <script>function Controller(adNode) {
  this.adContainerNode = adNode;
  this.wrapperNode = adNode.childNodes[1];
  this.firstPartNode = this.wrapperNode.childNodes[1];
  this.secondPartNode = this.wrapperNode.childNodes[3];
  this.placementType = this.firstPartNode.style.position == 'fixed' ? 'interstital' : 'inline';
  this.initialWidth = this.adContainerNode.style.width
  this.initialHeight = this.adContainerNode.style.height
  this.closeIcon = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAADb0lEQVR42u1XS0tbQRROqhQaUhRMTOKyG9OKWzUg5EG1bsRu/AXddiNtfSxqTLt1HQvd9hdkI2nUVLSQRekuxHcUQRBSXYXePCZ2vuGe25N4FZIbaBc5MMxl7syZ757znce12TrSkY78e7Hr84NQKNRNi4eHh8/K5fK7SqWyIscyG7HT09MI7Zudne3C2XaDMhQWCoXn1Wr1mxCicnOPSGCZy1+XL8x0WBL9CyFd0iKfcZkEdJNOp2uLi4ulkZERLRAIGGNhYUHb2tqqYg9EnvlEVma67JYsk0gkHFLxDi7Y2Ngoj42NleWyuG9gD/bqoHZ2d3cfM1B2K27qIjBra2u/6cLBwUHhdruFw+GoG1jDO9oXj8c13ao/5ubmHpHOptEQgclNBGZ4eNi4rK+v75Zl+BrtxVno0DRt3RJ/QGByE79A8kRMTEyoZ6/XawDweDxqjkQiYmlpqQ5UKpVSlrq4uHjTMiBEE8jJOYOLIEdHRwaQ/v5+AwzGwcGB2hOLxYy1cDhcLRaL4FNhdXXV1TQYqfQpQhvRRJzBPDk5KY6Pj9WF+/v7t1yWy+XUO5mLxPT0tFrz+/1q3tzcLMFKMoe9bhoQkh4OI7ShDGR1uVzGxVKpuhhzI5iTkxPR09Oj1tyuv+fm5+c1PUd9aBoQMjAOI89AGSIIs8/nMwDAbRAAyWaz6jmfzxsABgYGBD+LPKUDWm4F0DIOQwlXysmLsbe3J0i4tTjZTQBF2woI7qNnsgxZygy0CaD3bQPEv5ysA8uA4BBEGL33eX11gOB+HdDHljmE2kRW4UmPwIDAjZzi0Qc+EadkyqBS8qppQJKcIRxGoeRhHwwGDWsATG9vb13Y8+ibmpoS7Gx1e3sbJaSYyWQ8LfVB0ko/5YDbbiVG5Bmn02m4kXOG8hRPjKOjo6VarQbrrFspHS9hpWQyWeJlIBqNipmZmbrQ5ikBliEwrHSo/un6+jpkqQ+SX/TlruLKo41z5q7iqvdGvC9qqf3olm773th+DA0NmbYfAMTbDwYmbdIWt2YlWc+cBAru45y6a4Az5CaAkW5+aLWVbWw7u8l9IDqiDymBt6/IM6h9KMggsL43btIOt62vVkRH9N3X4MsAk9jLX6+ursbb3uTz3yAO7Pz8PGjyC7Qigbw9Ozt70vAxdltHOtKR/0T+AL2SJvDTWPbCAAAAAElFTkSuQmCC" 
}

Controller.prototype = {
  expand : function(arguments) {
    if (! arguments["url"]) {
      this.firstPartNode.contentDocument.body.setAttribute("class", "expanded");
    } else {
      this.firstPartNode.style.display = 'none'
      this.secondPartNode.src = arguments["url"]
      this.secondPartNode.style.display = 'block'
    }

    if(!arguments["useCustomClose"]) {
      this._setClose() 
    }

    this._resizeWrapper({ width: arguments.width, height: arguments.height, position: "fixed" });
    this._maximizeAdContainer()
  },

  resize : function(arguments) {
    this.firstPartNode.contentDocument.body.setAttribute("class", "resized");
    this._resizeWrapper(arguments)
  },

  _resizeWrapper : function(arguments) {
    var position = arguments.position || (arguments.x && arguments.width ? "fixed" : "static")
    if(arguments.width && arguments.height) {
      this.wrapperNode.style.width = arguments.width + "px";
      this.wrapperNode.style.height = arguments.height + "px";
    } else {
      this.wrapperNode.style.width = "auto";
      this.wrapperNode.style.height = "auto";
    }
    this.wrapperNode.style.position = position;
    this.wrapperNode.style.overflow = position == "static" ? "visible" : "hidden";
    this.wrapperNode.style.top = (arguments.x || 0) + "px";
    this.wrapperNode.style.left = (arguments.y || 0) + "px";
  },

  _maximizeAdContainer : function() {
    this.adContainerNode.style.width = "auto"
    this.adContainerNode.style.height = "auto"
    this.adContainerNode.style.position = "fixed"
    this.adContainerNode.style.top = 0
    this.adContainerNode.style.left = 0
    this.adContainerNode.style.right = 0
    this.adContainerNode.style.bottom = 0 
    this.adContainerNode.style.background = "rgba(0, 0, 0, 0.6)"
  },

  _minimizeAdContainer : function() {
    this.adContainerNode.style.width = this.initialWidth
    this.adContainerNode.style.height = this.initialHeight
    this.adContainerNode.style.position = "static"
    this.adContainerNode.style.top = "initial"
    this.adContainerNode.style.left = "initial" 
    this.adContainerNode.style.right = "initial" 
    this.adContainerNode.style.bottom = "initial" 
    this.adContainerNode.style.background = "none"
  },

  close : function(fromState) {
    if ( fromState == "default" ) {
      this.adContainerNode.style.display = 'none';
    } else {
      this.firstPartNode.contentDocument.body.removeAttribute("class", "expanded");
      this.firstPartNode.contentDocument.body.removeAttribute("class", "resized");
      this.secondPartNode.style.display = 'none';
      this.firstPartNode.style.display = 'block';
      var closeNode = this.wrapperNode.getElementsByClassName("mraidClose")[0]
      if(closeNode) {
        closeNode.remove();
      }
      this._resizeWrapper({});
      this._minimizeAdContainer();
    }
  },

  getCurrentPosition : function() {
    return {
      x: this.wrapperNode.offsetLeft,
      y: this.wrapperNode.offsetTop,
      width: this.wrapperNode.offsetWidth,
      height: this.wrapperNode.offsetHeight
    }
  },

  getPlacementType : function() {
    return this.placementType;
  },

  _setClose : function() {
    var closeNode = document.createElement('img');

    closeNode.setAttribute('src', this.closeIcon);
    closeNode.setAttribute('class', 'mraidClose');
    closeNode.setAttribute('onclick', 'mraid.close();');
    closeNode.style.position = 'absolute';
    closeNode.style.width = '50px';
    closeNode.style.height = '50px';
    closeNode.style.top = '0px';
    closeNode.style.right = '0px';
    closeNode.style.zIndex = '99999999999';

    this.wrapperNode.appendChild(closeNode);
  },

  postMessage: function(event) {
    if (event.target == "controller") {
      return this[event.action].apply(controller, [event.arguments])
    }
  }
}

window.controller = new Controller(document.getElementById('mraid_ad_container_id'));
</script>

      <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
      <div id="debugger" style="position: fixed; right: 0; top: 0; background: #ddd">
        <iframe width="100%" height="100%" src='../debugger.html' allowtransparency='true' seamless scrolling='no' style='z-index:10000; background:none;position: static; overflow: hidden !important;border: none !important;background-color: none !important;'></iframe>
      </div>
    </body>
</html>
