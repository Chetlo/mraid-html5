<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <!-- Use title if it's in the page YAML frontmatter -->
        <title>Ads :: Resizable mraid</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
        

        <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
    </head>
    <body>
      
      <h2>Two part mraid template</h2>
      <p>Consequuntur amet dolorem vitae eligendi ducimus id quae sit rem dignissimos voluptates consequuntur. ab odio eligendi nihil non dolor iste perspiciatis aut ipsum aliquam suscipit non fuga enim. quia in saepe commodi suscipit omnis possimus voluptas et dolor quia omnis. quisquam tenetur quia aperiam nostrum cumque. ut consectetur id voluptas adipisci quia et iure itaque explicabo. autem laudantium recusandae totam alias rerum porro hic qui numquam adipisci suscipit est repudiandae. quaerat id saepe nobis dolorem autem amet ullam vero eum impedit similique

Occaecati iste vitae iste sint dolores et eligendi commodi non. velit atque explicabo inventore corrupti. eligendi dolorem non ut ex est quisquam hic dignissimos in aliquam. blanditiis recusandae ut qui rerum sit ullam voluptatibus voluptatem accusantium. est iste porro molestias. veritatis iste placeat voluptas voluptatem nulla dolores consequatur aperiam accusantium fugit iusto libero consequuntur

Veniam aut at fugiat ut impedit. ut deserunt accusantium facilis itaque qui. veniam fugiat non aut nam ut nobis dolores delectus. enim voluptas non amet non cumque facere earum rerum. sed exercitationem alias voluptatem suscipit eius ut qui iste ipsum. qui velit non velit quia consequuntur aliquam quis quia. itaque assumenda quidem voluptatem quidem autem aut qui alias quia dolore voluptatibus consequatur non quo

Id aut corrupti maiores. recusandae est architecto omnis blanditiis est fuga modi. eaque iure debitis impedit hic perferendis nesciunt voluptas veniam sint consequuntur consequuntur ut et et. sunt saepe eos rem

Cumque voluptate perferendis iure soluta recusandae. sint libero eum vel est unde ipsum. porro voluptatem qui nihil consequatur labore et

Quis aut sint dolor voluptatem ducimus voluptatem. quia dolore dicta odio. minima quidem deserunt est incidunt dolorem. occaecati reprehenderit ut blanditiis blanditiis voluptatem. quia quas nobis consequatur necessitatibus consequatur tenetur natus unde adipisci excepturi eveniet repudiandae aspernatur. sunt error dolore quibusdam rerum illum velit corporis pariatur placeat

Et velit suscipit et. quidem accusamus nisi tenetur in porro possimus quibusdam rem ab dolore. quia illo sed labore vitae perferendis corporis. iste dolores eligendi sit excepturi nesciunt rerum minima rerum culpa maxime dicta. iure voluptatum rem qui molestiae aut nihil quibusdam odio at impedit quae ut

Odit mollitia eum ex odit eum aut numquam velit molestiae. asperiores eum hic nulla quo maiores aut eum expedita. quae totam maiores consequuntur et deleniti alias maxime doloribus qui omnis magnam. alias numquam atque consequatur ea cumque consectetur non

Atque minima non repellat et rem voluptatem consequatur incidunt. nesciunt error excepturi recusandae modi nostrum dolorem inventore explicabo praesentium. sunt laborum nam iure officiis modi ab porro ut in at veniam nihil

Adipisci ut et quae. omnis qui maxime eligendi accusamus asperiores voluptatibus ipsa quisquam. repellat excepturi id tenetur minima</p>

      <div id='mraid_ad_container_id' style="position: static; width: 320px; height: 50px; overflow: hidden">
  <div id="mraid_ad_container_id_wrapper">
    <iframe width="100%" height="100%" src='resize_mraid/index.html' allowtransparency='true' seamless scrolling='no' style='z-index:10000; background:none;position: static; overflow: hidden !important;border: none !important;background-color: none !important;'></iframe>
    <iframe width="100%" height="100%" allowtransparency='true' seamless scrolling='no' style='display:none; z-index:10000; background:none;position: fixed; overflow: hidden !important;border: none !important;background-color: none !important;'></iframe>
  </div>
</div>


      <script>function Controller(adNode) {
  this.adContainerNode = adNode;
  this.wrapperNode = adNode.childNodes[1];
  this.firstPartNode = this.wrapperNode.childNodes[1];
  this.secondPartNode = this.wrapperNode.childNodes[3];
  this.placementType = this.firstPartNode.style.position == 'fixed' ? 'interstital' : 'inline';
  this.initialWidth = this.adContainerNode.style.width
  this.initialHeight = this.adContainerNode.style.height
  this.closeIcon = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAADb0lEQVR42u1XS0tbQRROqhQaUhRMTOKyG9OKWzUg5EG1bsRu/AXddiNtfSxqTLt1HQvd9hdkI2nUVLSQRekuxHcUQRBSXYXePCZ2vuGe25N4FZIbaBc5MMxl7syZ757znce12TrSkY78e7Hr84NQKNRNi4eHh8/K5fK7SqWyIscyG7HT09MI7Zudne3C2XaDMhQWCoXn1Wr1mxCicnOPSGCZy1+XL8x0WBL9CyFd0iKfcZkEdJNOp2uLi4ulkZERLRAIGGNhYUHb2tqqYg9EnvlEVma67JYsk0gkHFLxDi7Y2Ngoj42NleWyuG9gD/bqoHZ2d3cfM1B2K27qIjBra2u/6cLBwUHhdruFw+GoG1jDO9oXj8c13ao/5ubmHpHOptEQgclNBGZ4eNi4rK+v75Zl+BrtxVno0DRt3RJ/QGByE79A8kRMTEyoZ6/XawDweDxqjkQiYmlpqQ5UKpVSlrq4uHjTMiBEE8jJOYOLIEdHRwaQ/v5+AwzGwcGB2hOLxYy1cDhcLRaL4FNhdXXV1TQYqfQpQhvRRJzBPDk5KY6Pj9WF+/v7t1yWy+XUO5mLxPT0tFrz+/1q3tzcLMFKMoe9bhoQkh4OI7ShDGR1uVzGxVKpuhhzI5iTkxPR09Oj1tyuv+fm5+c1PUd9aBoQMjAOI89AGSIIs8/nMwDAbRAAyWaz6jmfzxsABgYGBD+LPKUDWm4F0DIOQwlXysmLsbe3J0i4tTjZTQBF2woI7qNnsgxZygy0CaD3bQPEv5ysA8uA4BBEGL33eX11gOB+HdDHljmE2kRW4UmPwIDAjZzi0Qc+EadkyqBS8qppQJKcIRxGoeRhHwwGDWsATG9vb13Y8+ibmpoS7Gx1e3sbJaSYyWQ8LfVB0ko/5YDbbiVG5Bmn02m4kXOG8hRPjKOjo6VarQbrrFspHS9hpWQyWeJlIBqNipmZmbrQ5ikBliEwrHSo/un6+jpkqQ+SX/TlruLKo41z5q7iqvdGvC9qqf3olm773th+DA0NmbYfAMTbDwYmbdIWt2YlWc+cBAru45y6a4Az5CaAkW5+aLWVbWw7u8l9IDqiDymBt6/IM6h9KMggsL43btIOt62vVkRH9N3X4MsAk9jLX6+ursbb3uTz3yAO7Pz8PGjyC7Qigbw9Ozt70vAxdltHOtKR/0T+AL2SJvDTWPbCAAAAAElFTkSuQmCC" 
}

Controller.prototype = {
  expand : function(arguments) {
    if (! arguments["url"]) {
      this.firstPartNode.contentDocument.body.setAttribute("class", "expanded");
    } else {
      this.firstPartNode.style.display = 'none'
      this.secondPartNode.src = arguments["url"]
      this.secondPartNode.style.display = 'block'
    }

    if(!arguments["useCustomClose"]) {
      this._setClose() 
    }

    this._resizeWrapper({ width: arguments.width, height: arguments.height, position: "fixed" });
    this._maximizeAdContainer()
  },

  resize : function(arguments) {
    this.firstPartNode.contentDocument.body.setAttribute("class", "resized");
    this._resizeWrapper(arguments)
  },

  _resizeWrapper : function(arguments) {
    var position = arguments.position || (arguments.x && arguments.width ? "fixed" : "static")
    if(arguments.width && arguments.height) {
      this.wrapperNode.style.width = arguments.width + "px";
      this.wrapperNode.style.height = arguments.height + "px";
    } else {
      this.wrapperNode.style.width = "auto";
      this.wrapperNode.style.height = "auto";
    }
    this.wrapperNode.style.position = position;
    this.wrapperNode.style.overflow = position == "static" ? "visible" : "hidden";
    this.wrapperNode.style.top = (arguments.x || 0) + "px";
    this.wrapperNode.style.left = (arguments.y || 0) + "px";
  },

  _maximizeAdContainer : function() {
    this.adContainerNode.style.width = "auto"
    this.adContainerNode.style.height = "auto"
    this.adContainerNode.style.position = "fixed"
    this.adContainerNode.style.top = 0
    this.adContainerNode.style.left = 0
    this.adContainerNode.style.right = 0
    this.adContainerNode.style.bottom = 0 
    this.adContainerNode.style.background = "rgba(0, 0, 0, 0.6)"
  },

  _minimizeAdContainer : function() {
    this.adContainerNode.style.width = this.initialWidth
    this.adContainerNode.style.height = this.initialHeight
    this.adContainerNode.style.position = "static"
    this.adContainerNode.style.top = "initial"
    this.adContainerNode.style.left = "initial" 
    this.adContainerNode.style.right = "initial" 
    this.adContainerNode.style.bottom = "initial" 
    this.adContainerNode.style.background = "none"
  },

  close : function(fromState) {
    if ( fromState == "default" ) {
      this.adContainerNode.style.display = 'none';
    } else {
      this.firstPartNode.contentDocument.body.removeAttribute("class", "expanded");
      this.firstPartNode.contentDocument.body.removeAttribute("class", "resized");
      this.secondPartNode.style.display = 'none';
      this.firstPartNode.style.display = 'block';
      var closeNode = this.wrapperNode.getElementsByClassName("mraidClose")[0]
      if(closeNode) {
        closeNode.remove();
      }
      this._resizeWrapper({});
      this._minimizeAdContainer();
    }
  },

  getCurrentPosition : function() {
    return {
      x: this.wrapperNode.offsetLeft,
      y: this.wrapperNode.offsetTop,
      width: this.wrapperNode.offsetWidth,
      height: this.wrapperNode.offsetHeight
    }
  },

  getPlacementType : function() {
    return this.placementType;
  },

  _setClose : function() {
    var closeNode = document.createElement('img');

    closeNode.setAttribute('src', this.closeIcon);
    closeNode.setAttribute('class', 'mraidClose');
    closeNode.setAttribute('onclick', 'mraid.close();');
    closeNode.style.position = 'absolute';
    closeNode.style.width = '50px';
    closeNode.style.height = '50px';
    closeNode.style.top = '0px';
    closeNode.style.right = '0px';
    closeNode.style.zIndex = '99999999999';

    this.wrapperNode.appendChild(closeNode);
  },

  postMessage: function(event) {
    if (event.target == "controller") {
      return this[event.action].apply(controller, [event.arguments])
    }
  }
}

window.controller = new Controller(document.getElementById('mraid_ad_container_id'));
</script>

      <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
      <div id="debugger" style="position: fixed; right: 0; top: 0; background: #ddd">
        <iframe width="100%" height="100%" src='../debugger.html' allowtransparency='true' seamless scrolling='no' style='z-index:10000; background:none;position: static; overflow: hidden !important;border: none !important;background-color: none !important;'></iframe>
      </div>
    </body>
</html>
