<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Ads :: Resizable mraid</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

</head>
<body>

  <h2>Two part mraid template</h2>
  <p>Sunt doloribus perferendis aspernatur ex fuga molestiae dicta neque distinctio dolor. vero animi velit quaerat aliquid corrupti sit exercitationem at. quaerat dolorem minima perspiciatis deserunt impedit amet rerum illum neque odio tempore. quasi sunt id unde est eius illo aut rerum minus odit commodi necessitatibus rerum. quis maxime asperiores mollitia voluptate at dolores

    Ut eos quidem iste. aut ut est in sint veritatis vel accusamus nulla sed sequi. est sapiente eos nobis consequatur odio voluptatem totam et numquam amet aut. et sed autem non consequatur qui commodi esse ipsam natus labore. natus dolor eos omnis magnam suscipit neque nihil ipsum delectus beatae dolor dolor magnam. illo non expedita enim culpa assumenda molestiae eos

    Cum reprehenderit praesentium non aspernatur. ex nemo deserunt officia consequatur cum corrupti porro. asperiores autem quia ipsa. sunt quo debitis rerum voluptas

    Quam corporis at fugiat veritatis eum voluptates quam sit libero vel dolorem. in voluptatum non laboriosam aut maxime unde expedita sequi officiis culpa rerum dolorem. excepturi nisi odio occaecati animi id. consequatur excepturi unde nulla nam et exercitationem

    Ullam aut sit quia esse consequatur maxime. aspernatur quidem recusandae modi incidunt unde impedit quod fugiat consequatur natus hic. enim quia ex sapiente ut et provident esse vel praesentium numquam. vel sed animi nemo et qui sed qui a ullam. molestiae non eaque sint ab placeat sed qui voluptatem magnam

    Magni ut et aut at dolorem nostrum reprehenderit nostrum molestiae debitis. et temporibus ut voluptas repellat nemo in. ut ut error dignissimos. error reprehenderit ea in sit qui quia sequi nemo dolores nam molestiae voluptatem rerum nesciunt. libero et molestiae quia natus fugit fuga repellendus quis distinctio tempora

    Perferendis ut laborum provident rem voluptatem velit neque dignissimos quia possimus. ea tempore odit blanditiis maxime dicta quod aliquam vitae mollitia quidem sit non delectus quam. ad vel voluptatibus optio perferendis et possimus ullam eius eveniet voluptas dolore

    Soluta neque sint eligendi. minima ratione fugit voluptates officia natus. nulla nostrum consequuntur et earum iure nesciunt nulla veniam quis neque. recusandae repudiandae placeat nihil aut perspiciatis nesciunt

    Eveniet ab reprehenderit dignissimos architecto voluptatem rerum. fuga similique aut nesciunt est maxime voluptates debitis aut qui minima modi ipsam optio. aut vel at neque molestiae non rem autem eaque commodi asperiores. et recusandae perferendis dolores assumenda optio dolorem non. aut ut perferendis quisquam

    Est quia dolore ullam fugiat sed molestiae. sed quibusdam eum quam numquam ut sit temporibus dolores perferendis ratione voluptas deleniti et. quibusdam amet illo qui minus atque quia molestiae. corporis aliquid nostrum provident voluptate aut. autem provident at et. velit quis quasi velit corporis ea autem fugit ipsum excepturi a quidem. dolorem tempora velit fuga consectetur voluptatem natus minus quae</p>

    <div id='mraid_ad_container_id' style="position: static; width: 300px; height: 50px; overflow: hidden">
      <div id="mraid_ad_container_id_wrapper">
        <iframe width="100%" height="100%" src='resize_mraid/index.html' allowtransparency='true' seamless scrolling='no' style='z-index:10000; background:none;position: static; overflow: hidden !important;border: none !important;background-color: none !important;'></iframe>
        <iframe width="100%" height="100%" allowtransparency='true' seamless scrolling='no' style='display:none; z-index:10000; background:none;position: fixed; overflow: hidden !important;border: none !important;background-color: none !important;'></iframe>
      </div>
    </div>


    <script>function Controller(adNode) {
      this.adContainerNode = adNode;
      this.wrapperNode = adNode.childNodes[1];
      this.firstPartNode = this.wrapperNode.childNodes[1];
      this.secondPartNode = this.wrapperNode.childNodes[3];
      this.placementType = this.firstPartNode.style.position == 'fixed' ? 'interstital' : 'inline';
      this.initialWidth = this.adContainerNode.style.width
      this.initialHeight = this.adContainerNode.style.height
      this.closeIcon = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAADb0lEQVR42u1XS0tbQRROqhQaUhRMTOKyG9OKWzUg5EG1bsRu/AXddiNtfSxqTLt1HQvd9hdkI2nUVLSQRekuxHcUQRBSXYXePCZ2vuGe25N4FZIbaBc5MMxl7syZ757znce12TrSkY78e7Hr84NQKNRNi4eHh8/K5fK7SqWyIscyG7HT09MI7Zudne3C2XaDMhQWCoXn1Wr1mxCicnOPSGCZy1+XL8x0WBL9CyFd0iKfcZkEdJNOp2uLi4ulkZERLRAIGGNhYUHb2tqqYg9EnvlEVma67JYsk0gkHFLxDi7Y2Ngoj42NleWyuG9gD/bqoHZ2d3cfM1B2K27qIjBra2u/6cLBwUHhdruFw+GoG1jDO9oXj8c13ao/5ubmHpHOptEQgclNBGZ4eNi4rK+v75Zl+BrtxVno0DRt3RJ/QGByE79A8kRMTEyoZ6/XawDweDxqjkQiYmlpqQ5UKpVSlrq4uHjTMiBEE8jJOYOLIEdHRwaQ/v5+AwzGwcGB2hOLxYy1cDhcLRaL4FNhdXXV1TQYqfQpQhvRRJzBPDk5KY6Pj9WF+/v7t1yWy+XUO5mLxPT0tFrz+/1q3tzcLMFKMoe9bhoQkh4OI7ShDGR1uVzGxVKpuhhzI5iTkxPR09Oj1tyuv+fm5+c1PUd9aBoQMjAOI89AGSIIs8/nMwDAbRAAyWaz6jmfzxsABgYGBD+LPKUDWm4F0DIOQwlXysmLsbe3J0i4tTjZTQBF2woI7qNnsgxZygy0CaD3bQPEv5ysA8uA4BBEGL33eX11gOB+HdDHljmE2kRW4UmPwIDAjZzi0Qc+EadkyqBS8qppQJKcIRxGoeRhHwwGDWsATG9vb13Y8+ibmpoS7Gx1e3sbJaSYyWQ8LfVB0ko/5YDbbiVG5Bmn02m4kXOG8hRPjKOjo6VarQbrrFspHS9hpWQyWeJlIBqNipmZmbrQ5ikBliEwrHSo/un6+jpkqQ+SX/TlruLKo41z5q7iqvdGvC9qqf3olm773th+DA0NmbYfAMTbDwYmbdIWt2YlWc+cBAru45y6a4Az5CaAkW5+aLWVbWw7u8l9IDqiDymBt6/IM6h9KMggsL43btIOt62vVkRH9N3X4MsAk9jLX6+ursbb3uTz3yAO7Pz8PGjyC7Qigbw9Ozt70vAxdltHOtKR/0T+AL2SJvDTWPbCAAAAAElFTkSuQmCC"
    }

    Controller.prototype = {
      expand : function(arguments) {
        if (! arguments["url"]) {
          this.firstPartNode.contentDocument.body.setAttribute("class", "expanded");
        } else {
          this.firstPartNode.style.display = 'none'
          this.secondPartNode.src = arguments["url"]
          this.secondPartNode.style.display = 'block'
        }

        if(!arguments["useCustomClose"]) {
          this._setClose()
        }

        this._resizeWrapper({ width: arguments.width, height: arguments.height, position: "fixed" });
        this._maximizeAdContainer()
      },

      resize : function(arguments) {
        this.firstPartNode.contentDocument.body.setAttribute("class", "resized");
        this._resizeWrapper(arguments)
      },

      _resizeWrapper : function(arguments) {
        var position = arguments.position || (arguments.x && arguments.width ? "fixed" : "static")
        if(arguments.width && arguments.height) {
          this.wrapperNode.style.width = arguments.width + "px";
          this.wrapperNode.style.height = arguments.height + "px";
        } else {
          this.wrapperNode.style.width = "auto";
          this.wrapperNode.style.height = "auto";
        }
        this.wrapperNode.style.position = position;
        this.wrapperNode.style.overflow = position == "static" ? "visible" : "hidden";
        this.wrapperNode.style.top = (arguments.x || 0) + "px";
        this.wrapperNode.style.left = (arguments.y || 0) + "px";
      },

      _maximizeAdContainer : function() {
        this.adContainerNode.style.width = "auto"
        this.adContainerNode.style.height = "auto"
        this.adContainerNode.style.position = "fixed"
        this.adContainerNode.style.top = 0
        this.adContainerNode.style.left = 0
        this.adContainerNode.style.right = 0
        this.adContainerNode.style.bottom = 0 
        this.adContainerNode.style.background = "rgba(0, 0, 0, 0.6)"
      },

      _minimizeAdContainer : function() {
        this.adContainerNode.style.width = this.initialWidth
        this.adContainerNode.style.height = this.initialHeight
        this.adContainerNode.style.position = "static"
        this.adContainerNode.style.top = "initial"
        this.adContainerNode.style.left = "initial"
        this.adContainerNode.style.right = "initial"
        this.adContainerNode.style.bottom = "initial"
        this.adContainerNode.style.background = "none"
      },

      close : function(fromState) {
        if ( fromState == "default" ) {
          this.adContainerNode.style.display = 'none';
        } else {
          this.firstPartNode.contentDocument.body.removeAttribute("class", "expanded");
          this.firstPartNode.contentDocument.body.removeAttribute("class", "resized");
          this.secondPartNode.style.display = 'none';
          this.firstPartNode.style.display = 'block';
          var closeNode = this.wrapperNode.getElementsByClassName("mraidClose")[0]
          if(closeNode) {
            closeNode.remove();
          }
          this._resizeWrapper({});
          this._minimizeAdContainer();
        }
      },

      getCurrentPosition : function() {
        return {
          x: this.wrapperNode.offsetLeft,
          y: this.wrapperNode.offsetTop,
          width: this.wrapperNode.offsetWidth,
          height: this.wrapperNode.offsetHeight
        }
      },

      getPlacementType : function() {
        return this.placementType;
      },

      _setClose : function() {
        var closeNode = document.createElement('img');

        closeNode.setAttribute('src', this.closeIcon);
        closeNode.setAttribute('class', 'mraidClose');
        closeNode.setAttribute('onclick', 'mraid.close();');
        closeNode.style.position = 'absolute';
        closeNode.style.width = '50px';
        closeNode.style.height = '50px';
        closeNode.style.top = '0px';
        closeNode.style.right = '0px';
        closeNode.style.zIndex = '99999999999';

        this.wrapperNode.appendChild(closeNode);
      },

      postMessage: function(event) {
        if (event.target == "controller") {
          return this[event.action].apply(controller, [event.arguments])
        }
      }
    }

    window.controller = new Controller(document.getElementById('mraid_ad_container_id'));

    // if ("localStorage" in window && window["localStorage"] !== null) { localStorage.setItem("madvertise", "0"); } (function() {
    //   xhr = new XMLHttpRequest();
    //   xhr.open('GET', 'http://ad.eu1.lqm.io/site/TestTokn/ad/QOnPBrZ2/pingback/jp4lmttz', true);
    //   xhr.send();
    // }());
  </script>

  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
  <div id="debugger" style="position: fixed; right: 0; top: 0; background: #ddd">
    <iframe width="100%" height="100%" src='../debugger.html' allowtransparency='true' seamless scrolling='no' style='z-index:10000; background:none;position: static; overflow: hidden !important;border: none !important;background-color: none !important;'></iframe>
  </div>

</body>
</html>
